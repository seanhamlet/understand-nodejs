<!-- all of this code is processed by the browser, NOT nodejs -->
<html ng-app="TestApp">
	<head>
		<title>The MEAN stack</title>
    	<script src="https://ajax.googleapis.com/ajax/libs/angularjs/1.4.5/angular.js"></script>
	</head>
	<body ng-controller="MainController as vm">
		<ul>
			<li ng-repeat="person in vm.people">
				{{ person.name }}
			</li>
		</ul>

		<script>
			// this file (index.ejs) has access to server people because app.js passed it to it
			// when it was rendered
			// Then, the javascript on this file is run on the clientside
			// create global variable of clientPeople that can be accessed by public/js/app.js
			// it can be accssed because it is run before assets/js/app.js

			// json.stringify is run on the server
			var clientPeople = <%- JSON.stringify(serverPeople) %>
		</script>
		
		<script src="assets/js/app.js"></script>
	</body>
</html>